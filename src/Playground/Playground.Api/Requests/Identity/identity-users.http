@baseUrl = https://localhost:7030
@tenant = root
@token = {{access_token}}

### List users
GET {{baseUrl}}/api/v1/identity/users
Accept: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

### Get user by id
GET {{baseUrl}}/api/v1/identity/{{userId}}
Accept: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

### Get current user profile
GET {{baseUrl}}/api/v1/identity/profile
Accept: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

### Get current user permissions
GET {{baseUrl}}/api/v1/identity/permissions
Accept: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

### Register user (admin-driven)
POST {{baseUrl}}/api/v1/identity/register
Content-Type: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

{
  "firstName": "Jane",
  "lastName": "Doe",
  "email": "jane.doe@example.com",
  "userName": "jane.doe",
  "password": "P@ssword123",
  "confirmPassword": "P@ssword123",
  "phoneNumber": "+1-555-0000"
}

### Self-register user
POST {{baseUrl}}/api/v1/identity/self-register
Content-Type: application/json
tenant: {{tenant}}

{
  "firstName": "John",
  "lastName": "SelfService",
  "email": "john.self@example.com",
  "userName": "john.self",
  "password": "P@ssword123",
  "confirmPassword": "P@ssword123",
  "phoneNumber": "+1-555-0001"
}

### Change password for current user
POST {{baseUrl}}/api/v1/identity/change-password
Content-Type: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

{
  "password": "P@ssword123",
  "newPassword": "N3wP@ssword123",
  "confirmNewPassword": "N3wP@ssword123"
}

### Forgot password
POST {{baseUrl}}/api/v1/identity/forgot-password
Content-Type: application/json
tenant: {{tenant}}

{
  "email": "jane.doe@example.com"
}

### Reset password
POST {{baseUrl}}/api/v1/identity/reset-password
Content-Type: application/json
tenant: {{tenant}}

{
  "email": "jane.doe@example.com",
  "password": "N3wP@ssword123",
  "token": "{{resetTokenFromEmail}}"
}

### Confirm email
GET {{baseUrl}}/api/v1/identity/confirm-email?userId={{userId}}&code={{code}}&tenant={{tenant}}
Accept: application/json

### Assign roles to user
POST {{baseUrl}}/api/v1/identity/{{userId}}/roles
Content-Type: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

{
  "userId": "{{userId}}",
  "userRoles": [
    { "roleId": "{{roleId}}", "roleName": "Administrators" }
  ]
}

### Get roles for user
GET {{baseUrl}}/api/v1/identity/{{userId}}/roles
Accept: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

### Update user profile
PUT {{baseUrl}}/api/v1/identity/profile
Content-Type: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

{
  "id": "{{userId}}",
  "firstName": "Jane",
  "lastName": "Doe",
  "phoneNumber": "+1-555-9999",
  "email": "jane.doe@example.com",
  "deleteCurrentImage": false
}

### Toggle user status (activate/deactivate)
POST {{baseUrl}}/api/v1/identity/{{userId}}/toggle-status
Content-Type: application/json
tenant: {{tenant}}
Authorization: Bearer {{token}}

{
  "activateUser": true,
  "userId": "{{userId}}"
}

### Delete user
DELETE {{baseUrl}}/api/v1/identity/{{userId}}
tenant: {{tenant}}
Authorization: Bearer {{token}}

